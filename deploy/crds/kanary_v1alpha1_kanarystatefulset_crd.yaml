apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  name: kanarystatefulsets.kanary.k8s-operators.dev
spec:
  group: kanary.k8s-operators.dev
  names:
    kind: KanaryStatefulset
    listKind: KanaryStatefulsetList
    plural: kanarystatefulsets
    singular: kanarystatefulset
    shortNames:
    - ks
    - kanary
  additionalPrinterColumns:
  - name: Status
    type: string
    description: Status for the KanaryStatefulset.
    JSONPath: ".status.report.status"
  - name: StatefulSet
    type: string
    description: StatefulSet Name used for the KanaryStatefulset.
    JSONPath: ".spec.statefulSetName"
  - name: KanaryTest
    type: bool
    description: 是否通过了 kanary test
    JSONPath: ".status.kanaryTested"
  - name: Batches
    type: integer
    description: Batches progress. eg: 2/4  表示哪个批次
    JSONPath: ".status.batches"
  - name: Validation
    type: string
    description: Validation configuration used for the KanaryStatefulset.
    JSONPath: ".status.report.validation"
  scope: Namespaced
  version: v1alpha1
  subresources:
    status: {}